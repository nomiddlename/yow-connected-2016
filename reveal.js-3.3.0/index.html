<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Progressive Web Apps</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/night.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<style>
		.dimmest .backgrounds {
			-webkit-filter: opacity(10%);
			-moz-filter: opacity(10%);
			-o-filter: opacity(10%);
			-ms-filter: opacity(10%);
			filter: opacity(10%);
		}

		.dim .backgrounds {
			-webkit-filter: opacity(30%);
			-moz-filter: opacity(30%);
			-o-filter: opacity(30%);
			-ms-filter: opacity(30%);
			filter: opacity(30%);
		}
		</style>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					What has the web ever done for us?
					<section>Nothing
						<aside class="notes">
							As a mobile developer these days we tend to think of native apps as the gold standard,
							with a mobile web app as a fallback - responsive design if you're lucky, or just dump
							them onto the desktop site if not. You've just got to have a native app if you want to
							give the user the best experience.
						</aside>
					</section>
					<section>Well, there's links
						<aside class="notes">
							Links are the web's superpower, they're what made it great. They are still how a large
							percentage of traffic makes it to most sites - people sharing links, not through facebook
							or other trackable means, but by emails to friends or instant messages. It's been called
							"Dark Social".
							http://www.theatlantic.com/technology/archive/2012/10/dark-social-we-have-the-whole-history-of-the-web-wrong/263523/

							Clicking on links on a mobile device is a delightful journey into install-the-native-app
							popup begging. Remember the good old days when clicking on a link took you to the content
							you wanted?
						</aside>
					</section>
					<section>...and searching
						<aside class="notes">
							Being able to find your app in the store relies on the user typing in pretty much your app's
							exact name. So they already have to know about you and that your app exists. Unless you can get
							on the front page of the app store, or into the top 10 list for a category.

							On the web, they're used to just typing in vaguely what they want and having Google's mind-reading
							satellites pick out what they really wanted. And apps don't turn up much in the results - unless you
							pay for those ads.
						</aside>
					</section>
					<section>...and freedom from walled gardens
						<aside class="notes">
							It's up to Apple/Google/Amazon if your app makes it into the store, and it's up to them when that happens as well.

							The web has no such restrictions, it's totally open. Anyone can put a site up, and link to whatever
							they want. They can be indexed by search engines in a day or two, and suddenly www.goatprices.com is
							making money.
						</aside>
					</section>
					<section>But apart from that?</section>
					<section>Nothing.</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					Native apps
					<section>...are totally sweet.
						<aside class="notes">
							Originally, the move to native over web was for performance.
							Your UI was slicker, you bundled up a lot of the furniture so that
							the user didn't have to download background images, etc. It was all
							about reducing the time to first interaction.
						</aside>
					</section>
					<section>Rad.
						<aside class="notes">
							You got access to all the hardware features, could do some great things.
						</aside>
					</section>
					<section>Perhaps, if I may be so bold, fully sick.
						<aside class="notes">
							You also got push notifications which are awesome for keeping your users
							coming back for more. When they're done correctly.
						</aside>
					</section>
					<section>You should install one now.</section>
					<section><img src="images/trip-advisor-1.png"/></section>
					<section><img src="images/trip-advisor-2.png"/></section>
					<section>Never mind what you came here to do in the first place.</section>
					<section><img src="images/trip-advisor-3.png"/></section>
					<section data-background-image="images/dalek.jpg" data-state="dimmest">Install</section>
					<section><img src="images/trip-advisor-4.png"/></section>
					<section data-background-image="images/dalek.jpg" data-state="dim">INSTALL</section>
					<section><img src="images/trip-advisor-5.png"/></section>
					<section data-background-image="images/dalek.jpg">
						<h2>INSTALL!</h2>
						<p><cite><a href="https://commons.wikimedia.org/wiki/File:Dalek_(Dr_Who).jpg">Dalek image courtesy of Tony Hisgett</a></cite></p>
					</section>
					<section>Barriers</section>
					<section>
						Every step between your users and installing your app loses you 20% of them.
						<aside class="notes">
							Every barrier you put between the user and their goal will lose you about 20% of your audience.
							That sounds like I just made that statistic up, but I didn't. Someone else did.
							This is because your customer's goal (finding out about goat prices) is different to yours
							(getting them to install your app).
						</aside>
					</section>
					<section>
						<img src="images/mobile_funnel.png"/>
						<p><cite><a href="http://blog.gaborcselle.com/2012/10/every-step-costs-you-20-of-users.html">Gabor Cselle</a></cite></p>
					</section>
					<section>Most people don't install apps
						<img src="images/app-installs.png"/>
						<p><cite><a href="http://qz.com/253618/most-smartphone-users-download-zero-apps-per-month/">http://qz.com/253618</a></cite></p>
						<aside class="notes">
							Two-thirds of smartphone users install zero apps per month. They've got a handful of apps
							that they use for most purposes. In fact, 42% of app time happens in just one app.

							So here's the problem - nobody will ever find your app. If by some miracle someone does,
							they'll get distracted while attempting to download it. Even if they do download it, they'll
							never actually use it. That's not my opinion. That's science - look, I even had graphs and
							plausible-sounding statistics.
						</aside>
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					PWAs
					<section>If only there was another way
						<aside class="notes">
							Progressive web apps are made up of a few reasonably simple technologies that can be used to
							enhance the mobile experience for users with browsers that support those technologies. The
							progressive part of the name comes from progressive enhancement, with the idea that these
							functions are extra bits. Your web app will still work without them.
						</aside>
					</section>
					<section>Time to first interaction
						<aside class="notes">
							Service workers allow you to cache an app skeleton, so that your mobile app is
							ready to go much sooner than a normal web app. Your service worker acts as a
							proxy allowing you to intercept http requests made by your page, and decide to
							serve them from a cache or not.
						</aside>
					</section>
					<section>Getting onto the home screen
						<aside class="notes">
							Bypass all that tedious app store nonsense by using manifests to tell the browser that your site
							is installable.
						</aside>
					</section>
					<section>Push notifications
						<aside class="notes">
							If you've done the work to get a service worker and manifest on your site, then you're just a short
							step away from getting push notifications for your site as well.
						</aside>
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					Service Workers
					<section>
						<a href="https://nomiddlename.github.io/pow/">https://nomiddlename.github.io/pow/ - demo site</a>
					</section>
					<section>
						1. HTTPS only (localhost counts as secure)
						<aside class="notes">
							This is part of Google's move to prefer secure origins for powerful new features. And service
							workers allow you to intercept any http request made on the page, so that's pretty powerful.

							http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features
						</aside>
					</section>
					<section>
						2. Let the browser know about the service worker.
					</section>
					<section>
						<img src="images/sw-1.png"/>
					</section>
					<section>
						<img src="images/sw-2.png"/>
						<aside class="notes">
							Note that sw.js is in the root of the site - you can't ask for a higher
							level of scope, but you can ask for less. The API also uses promises.
							(Can have more than one sw with different scopes?)

							That call to "register" loads the service worker, and triggers an "install" event.
						</aside>
					</section>
					<section>
						<img src="images/sw-3.png"/>
						<aside class="notes">
							Here you can see I'm setting up a cache, and adding some files to it for later on.
							At this point the sw is not running, that doesn't happen until you get the "activate" event.
						</aside>
					</section>
					<section>
						<img src="images/sw-4.png"/>
						<aside class="notes">
							Here we're clearing out old caches that we don't need any more.

							For here on, our service worker is running in the background. Not doing anything, but it's there.
						</aside>
					</section>
					<section>
						<img src="images/sw-5.png"/>
						<aside class="notes">
							To intercept requests, and behave like a proxy, we have to listen for the "fetch" event.

							event 'e' has a property 'request' which the Cache API can use a key for storing responses.
						</aside>
					</section>
					<section>
						<img src="images/sw-6.png"/>
						<aside class="notes">
							Now, when we click onto another page, we get this.
						</aside>
					</section>
					<section>
						<img src="images/sw-7.png"/>
						<aside class="notes">
							That's because we had this list of files in that "install" event at the start.

							You’ll have noticed code in the “activate” event handler that deletes old caches.
							When we want to update our components, we bump the cache version number, reload the
							page - the new service worker will become active and the old one deleted, and our
							cache replaced with a new one. Caveat: filling the service worker cache will make
							use of the browser cache, so if it doesn’t look like your pages are updating, then
							check that as well - it fooled me for a while, I was convinced my service worker was
							broken. I also thought this would be a great replacement for all those little
							cache-busting tricks we do. You could use this as a central place to manage script
							updates - but this fallback to the browser cache means you’d still need to include the
							cache-busting. But at least you’d have one place to do all your cache-busting.

							Storage limits - shared for all storage areas (local, indexed db, cache) for domain.
							Most browsers limit to about 50Mb, but can query this using Quota API. But you should
							code to deal with having all your cached data removed by a user.
						</aside>
					</section>
					<section>
						Don't use my dodgy code.
						<p><a href="https://github.com/GoogleChrome/sw-precache">sw-precache (https://github.com/GoogleChrome/sw-precache)</a></p>
						<p><a href="https://googlechrome.github.io/sw-toolbox/">sw-toolbox (https://googlechrome.github.io/sw-toolbox/)</a></p>
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					Manifests
					<section>
						Makes your app installable.
						<aside class="notes">
							There are other ways to do this, using AppCache and lots of meta tags. AppCache
							is difficult to work with, and Chrome is deprecating support for it in favour of
							manifests and PWAs.
						</aside>
					</section>
					<section>
						<img src="images/manifest-1.png">
					</section>
					<section>
						<pre><code data-trim>
{
  "name": "POW! Conference 2016",
  "short_name": "POW! 2016",
  "start_url": "/pow/",
  "display": "standalone",
  "background_color": "white",
  "description": "Schedules and speakers for the exciting POW! Conference 2016",
  "icons": [
    { "src": "images/logo.png", "sizes": "192x192", "type": "image/png" }
  ]
}
						</code></pre>
						<aside class="notes">
							Can set a few properties relating to colours, titles, preferred orientation, start page.
							Important parts are "short_name", "start_url", and at least one icon.
						</aside>
					</section>
					<section>
						When do you get to install?
						<aside class="notes">
							Will be used if someone presses the "add to home screen" button, but there are
							also a few conditions under which Chrome will show the install banner without
							prompting.
						</aside>
					</section>
					<section>
						<ul>
							<li>HTTPS + Service Worker</li>
							<li>Manifest with "short_name", "start_url", and an icon</li>
							<li>User visits at least twice, with at least 5 mins between</li>
						</ul>
					</section>
					<section>
						<img src="images/manifest-2.png">
					</section>
					<section>
						<img src="images/manifest-3.png">
					</section>
					<section>
						<img src="images/manifest-4.png">
					</section>
					<section>
						<img src="images/manifest-5.png">
					</section>
					<section>
						Annoying?
						<aside class="notes">
							Hold on, weren't you banging on about not annoying users before?
							Maybe, in your extensive user testing ("asking your mum"), you think this is getting
							triggered too soon and you want control over when this install happens? Like at the
							end of checkout or something, when your user is more invested or trusting of you. Rather
							than in the middle of checkout and you might scare them off.
						</aside>
					</section>
					<section>
						beforeinstallprompt event
						<aside class="notes">
							Yay, those boffins in the browser labs have thought of that. Listen for the
							beforeinstallprompt event and you can choose to stop it from triggering
							and save it for later. You only get one shot at this though - if the user
							declines to install, they won't be asked again until they clear their browser cache.
						</aside>
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					Push notifications
					<section>
						More likely to convert
						<aside class="notes">
							A user that has received a timely, relevant push notification is something-something more likely
							to convert into a sale or evolve into a charizard or something. I was going to show some quotes
							here from case studies that show 20% click-through rates on push notifications on various sites.
							Instead I'm going to show you something a bit more personal, and I hope familiar to some of you.
						</aside>
					</section>
					<section>
						<img src="images/push-notification-1.png">
					</section>
					<section>
						Ask for permission
						<aside class="notes">
							Choose a good moment to ask the user. Not when they first turn up.
						</aside>
					</section>
					<section>
						Screenshot of the "asking for permission" code
					</section>
					<section>
						Register for push events
					</section>
					<section>
						Send one
					</section>
					<section>
						Receive
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					The bad news
					<section>
						Browser support
					</section>
					<section>
						Android - two thumbs up
					</section>
					<section>
						List of APIs and ticks next to them (sw, cache, indexeddb, push notifications, manifest)
					</section>
					<section>
						iOS
						<aside class="notes">
							Safari = IE6 of the mobile world.
							Chrome + Firefox on iOS have to use the same underlying browser tech (webkit).
							But - remember the progressive part of the name. There's nothing here that will
							break your mobile site on Safari (if you implement it correctly, anyway). And the
							webkit people have got service workers on their radar.

							(Push notifications work on desktop Safari, but not mobile)
						</aside>
					</section>
					<section>
						List of APIs and crosses / caveats
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					When should we use PWAs?
					<section>
						Anything where your business model does not involve selling your app in a store
					</section>
					<section>
						If you've got a mobile site, but don't know if you want a native one.
					</section>
					<section>
						You don't want to have to implement another "INSTALL" popup.
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					Homework
					<section>
						Offline-first udacity course
					</section>
					<section>
						Google's developer pages
					</section>
					<section>
						People to follow
						Alex Russell, Jake Archibald, Addy Osmani
					</section>
				</section>
				<section data-background-image="images/shinesolutionslogo.png" data-background-position="top right" data-background-size="20%">
					Who was that masked man?
					<section>
						Troy McClure
					</section>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
